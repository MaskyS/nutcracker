<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>BookFeed - Mobile First</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,400;0,6..72,500;1,6..72,400;1,6..72,500&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Warm paper palette */
      --bg: #FAFAF8;
      --bg-card: #FFFFFF;
      --bg-hover: #F5F4F2;
      --bg-muted: #F0EFED;

      /* Text */
      --ink: #1C1C1C;
      --ink-secondary: #555555;
      --ink-tertiary: #888888;
      --ink-muted: #AAAAAA;

      /* Accent - warm terracotta */
      --accent: #C45D3E;
      --accent-light: #E8D5CF;
      --accent-subtle: rgba(196, 93, 62, 0.08);

      /* System */
      --border: rgba(0,0,0,0.06);
      --shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.03);

      /* Type */
      --serif: 'Newsreader', Georgia, serif;
      --sans: 'DM Sans', -apple-system, sans-serif;

      /* Safe areas for notched phones */
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      font-size: 16px;
    }

    body {
      font-family: var(--sans);
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
      min-height: 100vh;
      min-height: 100dvh;
      overscroll-behavior: none;
    }

    /* ========================================
       MOBILE SHELL
    ======================================== */

    .app {
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      padding-top: var(--safe-top);
      padding-bottom: calc(60px + var(--safe-bottom));
    }

    /* ========================================
       HEADER - Minimal, always visible
    ======================================== */

    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--bg);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 28px;
      height: 28px;
      background: var(--accent);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: var(--serif);
      font-size: 15px;
      font-weight: 500;
    }

    .header-title {
      font-weight: 600;
      font-size: 17px;
      letter-spacing: -0.01em;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .header-progress {
      font-size: 13px;
      color: var(--ink-tertiary);
      font-weight: 500;
    }

    .header-progress strong {
      color: var(--accent);
      font-weight: 600;
    }

    /* ========================================
       FEED
    ======================================== */

    .feed {
      flex: 1;
      padding: 8px 0;
    }

    /* ========================================
       POST CARD - Mobile Optimized
    ======================================== */

    .post {
      background: var(--bg-card);
      margin: 0 12px 12px;
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      position: relative;
      transition: transform 0.15s ease;
    }

    .post:active {
      transform: scale(0.99);
    }

    /* Source row */
    .post-source {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 14px;
    }

    .source-cover {
      width: 36px;
      height: 48px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      position: relative;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .source-cover::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: rgba(0,0,0,0.12);
    }

    .source-cover span {
      font-family: var(--serif);
      font-size: 14px;
      color: white;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    .source-info {
      flex: 1;
      min-width: 0;
    }

    .source-title {
      font-weight: 600;
      font-size: 14px;
      color: var(--ink);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .source-meta {
      font-size: 12px;
      color: var(--ink-tertiary);
      margin-top: 1px;
    }

    /* Quote - The hero */
    .post-quote {
      font-family: var(--serif);
      font-size: 18px;
      line-height: 1.55;
      color: var(--ink);
      margin-bottom: 12px;
      position: relative;
      padding-left: 14px;
    }

    .post-quote::before {
      content: '';
      position: absolute;
      left: 0;
      top: 3px;
      bottom: 3px;
      width: 3px;
      background: var(--accent);
      border-radius: 2px;
    }

    /* Insight */
    .post-insight {
      font-size: 13px;
      line-height: 1.5;
      color: var(--ink-secondary);
      background: var(--bg-muted);
      padding: 10px 12px;
      border-radius: 10px;
      margin-bottom: 12px;
    }

    .post-insight::before {
      content: '✦ ';
      color: var(--accent);
    }

    /* Context (expanded) */
    .post-context {
      margin-bottom: 12px;
      padding: 12px;
      background: var(--bg);
      border-radius: 10px;
      border: 1px solid var(--border);
      animation: fadeIn 0.2s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .context-label {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--ink-tertiary);
      margin-bottom: 6px;
    }

    .context-text {
      font-family: var(--serif);
      font-size: 14px;
      line-height: 1.6;
      color: var(--ink-secondary);
    }

    .context-text mark {
      background: var(--accent-light);
      color: var(--ink);
      padding: 1px 0;
    }

    /* Actions */
    .post-actions {
      display: flex;
      align-items: center;
      gap: 4px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .action {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      padding: 8px 14px;
      border: none;
      background: transparent;
      color: var(--ink-tertiary);
      font-size: 13px;
      font-weight: 500;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
      font-family: var(--sans);
      flex: 1;
    }

    .action:active {
      background: var(--bg-muted);
    }

    .action.primary {
      color: var(--ink-secondary);
    }

    .action.active {
      color: var(--accent);
      background: var(--accent-subtle);
    }

    .action.dismiss {
      flex: 0;
      padding: 8px 12px;
    }

    .action.dismiss:active {
      background: #FEE2E2;
      color: #B91C1C;
    }

    .action svg {
      width: 18px;
      height: 18px;
    }

    /* Seen indicator */
    .seen-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 10px;
      font-weight: 500;
      color: var(--ink-muted);
      background: var(--bg-muted);
      padding: 2px 6px;
      border-radius: 4px;
    }

    /* ========================================
       ALL CAUGHT UP
    ======================================== */

    .caught-up {
      text-align: center;
      padding: 48px 24px;
      margin: 12px;
    }

    .caught-up-icon {
      width: 72px;
      height: 72px;
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      font-size: 32px;
    }

    .caught-up h2 {
      font-family: var(--serif);
      font-size: 22px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 6px;
    }

    .caught-up p {
      font-size: 14px;
      color: var(--ink-secondary);
      margin-bottom: 24px;
    }

    .caught-up-stats {
      display: flex;
      justify-content: center;
      gap: 32px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 600;
      color: var(--accent);
    }

    .stat-label {
      font-size: 12px;
      color: var(--ink-tertiary);
      margin-top: 2px;
    }

    /* ========================================
       BOTTOM NAV
    ======================================== */

    .nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border-top: 1px solid var(--border);
      padding: 8px 0 var(--safe-bottom);
      display: flex;
      justify-content: space-around;
      z-index: 100;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      padding: 8px 20px;
      color: var(--ink-tertiary);
      text-decoration: none;
      font-size: 10px;
      font-weight: 500;
      border-radius: 12px;
      transition: all 0.15s ease;
      cursor: pointer;
    }

    .nav-item.active {
      color: var(--accent);
    }

    .nav-item svg {
      width: 24px;
      height: 24px;
    }

    /* ========================================
       LIBRARY VIEW
    ======================================== */

    .library {
      padding: 16px;
      display: none;
    }

    .library.active {
      display: block;
    }

    .library-header {
      margin-bottom: 20px;
    }

    .library-header h1 {
      font-family: var(--serif);
      font-size: 24px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .library-header p {
      font-size: 13px;
      color: var(--ink-tertiary);
    }

    .books-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .book {
      cursor: pointer;
    }

    .book:active {
      transform: scale(0.97);
    }

    .book-cover {
      aspect-ratio: 2/3;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0,0,0,0.12);
    }

    .book-cover::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: rgba(0,0,0,0.12);
    }

    .book-cover span {
      font-family: var(--serif);
      font-size: 20px;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .book-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--ink);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.3;
    }

    .book-meta {
      font-size: 11px;
      color: var(--ink-tertiary);
      margin-top: 2px;
    }

    /* Processing shimmer */
    .book.processing .book-cover::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* ========================================
       VIEW TOGGLE (for demo)
    ======================================== */

    .feed.hidden { display: none; }
    .library.hidden { display: none; }

    /* ========================================
       DESKTOP ENHANCEMENT (optional)
    ======================================== */

    @media (min-width: 640px) {
      .app {
        max-width: 480px;
        margin: 0 auto;
        box-shadow: -1px 0 0 var(--border), 1px 0 0 var(--border);
      }

      .nav {
        max-width: 480px;
        left: 50%;
        transform: translateX(-50%);
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">B</div>
        <span class="header-title">Today</span>
      </div>
      <div class="header-right">
        <span class="header-progress"><strong>23</strong> / 50</span>
      </div>
    </header>

    <!-- Feed View -->
    <main class="feed" id="feed-view">

      <!-- Post 1: Standard quote -->
      <article class="post">
        <span class="seen-badge">2x</span>
        <div class="post-source">
          <div class="source-cover" style="background: linear-gradient(135deg, #1E3A5F, #2D5A87);">
            <span>A</span>
          </div>
          <div class="source-info">
            <div class="source-title">Antifragile</div>
            <div class="source-meta">Nassim Taleb · p. 127</div>
          </div>
        </div>
        <blockquote class="post-quote">
          The three most harmful addictions are heroin, carbohydrates, and a monthly salary.
        </blockquote>
        <div class="post-actions">
          <button class="action primary" onclick="toggleExpand(this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
            More
          </button>
          <button class="action" onclick="toggleSave(this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg>
            Save
          </button>
          <button class="action dismiss">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
      </article>

      <!-- Post 2: With insight -->
      <article class="post">
        <div class="post-source">
          <div class="source-cover" style="background: linear-gradient(135deg, #5D4037, #795548);">
            <span>M</span>
          </div>
          <div class="source-info">
            <div class="source-title">Meditations</div>
            <div class="source-meta">Marcus Aurelius · Book IV</div>
          </div>
        </div>
        <blockquote class="post-quote">
          Never esteem anything as of advantage to you that will make you break your word or lose your self-respect.
        </blockquote>
        <div class="post-insight">
          Integrity compounds. Short-term gains from compromise create long-term costs in self-trust.
        </div>
        <div class="post-actions">
          <button class="action primary" onclick="toggleExpand(this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
            More
          </button>
          <button class="action active">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg>
            Saved
          </button>
          <button class="action dismiss">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
      </article>

      <!-- Post 3: Expanded -->
      <article class="post">
        <span class="seen-badge">5x</span>
        <div class="post-source">
          <div class="source-cover" style="background: linear-gradient(135deg, #2E7D32, #43A047);">
            <span>H</span>
          </div>
          <div class="source-info">
            <div class="source-title">How to Take Smart Notes</div>
            <div class="source-meta">Sönke Ahrens · p. 84</div>
          </div>
        </div>
        <blockquote class="post-quote">
          The slip-box is not a collection of notes. It is a tool for thinking and an idea generator.
        </blockquote>
        <div class="post-context">
          <div class="context-label">Surrounding context</div>
          <p class="context-text">
            Many students try to build a collection of notes covering an extensive range of topics. But <mark>the slip-box is not a collection of notes. It is a tool for thinking and an idea generator.</mark> What makes it powerful is the connections between notes and how they spark new ideas.
          </p>
        </div>
        <div class="post-actions">
          <button class="action primary active">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
            Less
          </button>
          <button class="action">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg>
            Save
          </button>
          <button class="action dismiss">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
      </article>

      <!-- Post 4: Question type -->
      <article class="post">
        <div class="post-source">
          <div class="source-cover" style="background: linear-gradient(135deg, #6A1B9A, #8E24AA);">
            <span>T</span>
          </div>
          <div class="source-info">
            <div class="source-title">Thinking, Fast and Slow</div>
            <div class="source-meta">Daniel Kahneman · p. 201</div>
          </div>
        </div>
        <blockquote class="post-quote" style="font-style: normal;">
          What is "WYSIATI" and why does it matter?
        </blockquote>
        <div class="post-insight" style="background: var(--accent-subtle);">
          WYSIATI = "What You See Is All There Is." We make confident judgments from limited information, ignoring what we don't know.
        </div>
        <div class="post-actions">
          <button class="action primary" onclick="toggleExpand(this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
            More
          </button>
          <button class="action">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg>
            Save
          </button>
          <button class="action dismiss">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
      </article>

      <!-- All Caught Up (toggle with nav) -->
      <div class="caught-up" id="caught-up" style="display: none;">
        <div class="caught-up-icon">✓</div>
        <h2>You're all caught up</h2>
        <p>Come back tomorrow for fresh extracts</p>
        <div class="caught-up-stats">
          <div class="stat">
            <div class="stat-value">50</div>
            <div class="stat-label">Today</div>
          </div>
          <div class="stat">
            <div class="stat-value">8</div>
            <div class="stat-label">Saved</div>
          </div>
          <div class="stat">
            <div class="stat-value">12</div>
            <div class="stat-label">Books</div>
          </div>
        </div>
      </div>
    </main>

    <!-- Library View -->
    <div class="library hidden" id="library-view">
      <div class="library-header">
        <h1>Your Library</h1>
        <p>12 books · 847 extracts</p>
      </div>

      <div class="books-grid">
        <div class="book">
          <div class="book-cover" style="background: linear-gradient(135deg, #1E3A5F, #2D5A87);">
            <span>A</span>
          </div>
          <div class="book-title">Antifragile</div>
          <div class="book-meta">142 extracts</div>
        </div>

        <div class="book">
          <div class="book-cover" style="background: linear-gradient(135deg, #5D4037, #795548);">
            <span>M</span>
          </div>
          <div class="book-title">Meditations</div>
          <div class="book-meta">89 extracts</div>
        </div>

        <div class="book">
          <div class="book-cover" style="background: linear-gradient(135deg, #2E7D32, #43A047);">
            <span>H</span>
          </div>
          <div class="book-title">How to Take Smart Notes</div>
          <div class="book-meta">76 extracts</div>
        </div>

        <div class="book">
          <div class="book-cover" style="background: linear-gradient(135deg, #6A1B9A, #8E24AA);">
            <span>T</span>
          </div>
          <div class="book-title">Thinking, Fast and Slow</div>
          <div class="book-meta">118 extracts</div>
        </div>

        <div class="book">
          <div class="book-cover" style="background: linear-gradient(135deg, #C62828, #E53935);">
            <span>Z</span>
          </div>
          <div class="book-title">Zen and the Art of...</div>
          <div class="book-meta">94 extracts</div>
        </div>

        <div class="book processing">
          <div class="book-cover" style="background: linear-gradient(135deg, #37474F, #546E7A);">
            <span>S</span>
          </div>
          <div class="book-title">Sapiens</div>
          <div class="book-meta">Processing...</div>
        </div>
      </div>
    </div>

    <!-- Bottom Nav -->
    <nav class="nav">
      <a class="nav-item active" onclick="showFeed()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>
        Feed
      </a>
      <a class="nav-item" onclick="showLibrary()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
        Library
      </a>
      <a class="nav-item" onclick="showSaved()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg>
        Saved
      </a>
    </nav>
  </div>

  <script>
    function showFeed() {
      document.getElementById('feed-view').classList.remove('hidden');
      document.getElementById('library-view').classList.add('hidden');
      document.querySelectorAll('.nav-item').forEach((el, i) => {
        el.classList.toggle('active', i === 0);
      });
      document.querySelector('.header-title').textContent = 'Today';
    }

    function showLibrary() {
      document.getElementById('feed-view').classList.add('hidden');
      document.getElementById('library-view').classList.remove('hidden');
      document.querySelectorAll('.nav-item').forEach((el, i) => {
        el.classList.toggle('active', i === 1);
      });
      document.querySelector('.header-title').textContent = 'Library';
    }

    function showSaved() {
      // For now, just toggle caught up state in feed
      showFeed();
      const posts = document.querySelectorAll('.post');
      const caughtUp = document.getElementById('caught-up');
      const isHidden = caughtUp.style.display === 'none';

      posts.forEach(p => p.style.display = isHidden ? 'none' : 'block');
      caughtUp.style.display = isHidden ? 'block' : 'none';

      document.querySelectorAll('.nav-item').forEach((el, i) => {
        el.classList.toggle('active', i === 2);
      });
      document.querySelector('.header-title').textContent = isHidden ? 'All Done!' : 'Today';
    }

    function toggleExpand(btn) {
      const post = btn.closest('.post');
      const hasContext = post.querySelector('.post-context');

      if (hasContext) {
        hasContext.remove();
        btn.innerHTML = `<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg> More`;
        btn.classList.remove('active');
      } else {
        const quote = post.querySelector('.post-quote').textContent.trim();
        const context = document.createElement('div');
        context.className = 'post-context';
        context.innerHTML = `
          <div class="context-label">Surrounding context</div>
          <p class="context-text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. <mark>${quote}</mark> Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.
          </p>
        `;
        const insertPoint = post.querySelector('.post-insight') || post.querySelector('.post-quote');
        insertPoint.after(context);
        btn.innerHTML = `<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg> Less`;
        btn.classList.add('active');
      }
    }

    function toggleSave(btn) {
      const isActive = btn.classList.contains('active');
      if (isActive) {
        btn.classList.remove('active');
        btn.innerHTML = `<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg> Save`;
      } else {
        btn.classList.add('active');
        btn.innerHTML = `<svg fill="currentColor" viewBox="0 0 24 24"><path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg> Saved`;
      }
    }
  </script>
</body>
</html>
